---
title: éƒ¨ç½²å’Œé…ç½®å®Œæ•´æŒ‡å—
---

# éƒ¨ç½²å’Œé…ç½®å®Œæ•´æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬æŒ‡å—æ¶µç›–äº†æ˜Ÿé™…äº‘ç›˜é¡¹ç›®çš„éƒ¨ç½²é…ç½®ã€ç¯å¢ƒç®¡ç†ã€ä¸Šä¼ é™åˆ¶å’Œç³»ç»Ÿä¼˜åŒ–ç­‰å®Œæ•´å†…å®¹ã€‚

## ğŸ“Š åŠ¨æ€ç¯å¢ƒé…ç½®ç³»ç»Ÿ

### ğŸŒ æ¦‚è¿°

æ˜Ÿé™…äº‘ç›˜é¡¹ç›®å®ç°äº†ç±»ä¼¼EPSï¼ˆEnvironment Configuration Systemï¼‰çš„åŠ¨æ€ç¯å¢ƒé…ç½®ç³»ç»Ÿï¼Œæ”¯æŒå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒçš„å¿«é€Ÿåˆ‡æ¢ã€‚

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹

ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹å½“å‰ç¯å¢ƒï¼š

```javascript
// è‡ªåŠ¨æ£€æµ‹ç¯å¢ƒ
console.log(window.ENV_MANAGER.currentEnv); // 'local' æˆ– 'prod'
console.log(window.ENV_MANAGER.config.name); // ç¯å¢ƒåç§°
```

#### 2. æ‰‹åŠ¨åˆ‡æ¢ç¯å¢ƒ

```javascript
// åˆ‡æ¢åˆ°å¼€å‘ç¯å¢ƒ
window.ENV_UTILS.switchToLocal();

// åˆ‡æ¢åˆ°ç”Ÿäº§ç¯å¢ƒ
window.ENV_UTILS.switchToProd();
```

#### 3. ä½¿ç”¨ç¯å¢ƒé…ç½®

```javascript
// æ„å»ºAPI URL
const apiUrl = window.ENV_MANAGER.buildApiUrl('/api/files');
console.log(apiUrl); // http://localhost:8080/api/files (å¼€å‘ç¯å¢ƒ)

// æ„å»ºèµ„æºURL
const resourceUrl = window.ENV_MANAGER.buildResourceUrl('/static/css/style.css');

// æ„å»ºå¤´åƒURL
const avatarUrl = window.ENV_MANAGER.buildAvatarUrl('user-avatar.jpg');

// æ„å»ºæ–‡ä»¶URL
const fileUrl = window.ENV_MANAGER.buildFileUrl('documents/report.pdf');
```

### ğŸ“‹ ç¯å¢ƒé…ç½®

#### é¢„å®šä¹‰ç¯å¢ƒ

| ç¯å¢ƒ | åç§° | APIåœ°å€ | è°ƒè¯•æ¨¡å¼ | ç‰¹æ€§ |
|------|------|---------|----------|------|
| local | å¼€å‘ç¯å¢ƒ | http://localhost:8080 | âœ… | çƒ­é‡è½½ã€è¯¦ç»†æ—¥å¿— |
| prod | ç”Ÿäº§ç¯å¢ƒ | ç›¸å¯¹è·¯å¾„ | âŒ | ç”Ÿäº§ä¼˜åŒ– |

#### ç¯å¢ƒç‰¹æ€§

```javascript
// æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨
if (window.ENV_MANAGER.isFeatureEnabled('hotReload')) {
    console.log('çƒ­é‡è½½å·²å¯ç”¨');
}

if (window.ENV_MANAGER.isFeatureEnabled('detailedLogs')) {
    console.log('è¯¦ç»†æ—¥å¿—å·²å¯ç”¨');
}
```

### ğŸ›ï¸ ç¯å¢ƒåˆ‡æ¢æ–¹å¼

#### 1. URLå‚æ•°åˆ‡æ¢

åœ¨URLä¸­æ·»åŠ `env`å‚æ•°ï¼š

```
http://localhost:8080/?env=local
http://localhost:8080/?env=prod
```

#### 2. æ§åˆ¶å°å‘½ä»¤åˆ‡æ¢

åœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š

```javascript
// æ˜¾ç¤ºå½“å‰ç¯å¢ƒä¿¡æ¯
window.ENV_UTILS.showEnvInfo();

// å¿«é€Ÿåˆ‡æ¢ç¯å¢ƒ
window.ENV_UTILS.switchToLocal();
window.ENV_UTILS.switchToProd();
```

#### 3. å¯è§†åŒ–ç•Œé¢åˆ‡æ¢

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œé¡µé¢å³ä¸‹è§’ä¼šæ˜¾ç¤ºç¯å¢ƒåˆ‡æ¢å™¨ï¼ˆä»…ç®¡ç†å‘˜å¯è§ï¼‰ï¼š

- ç‚¹å‡»æ‚¬æµ®æŒ‰é’®æ‰“å¼€é€‰é¡¹
- é€‰æ‹©å¼€å‘ç¯å¢ƒæˆ–ç”Ÿäº§ç¯å¢ƒ
- è‡ªåŠ¨æ˜¾ç¤ºåˆ‡æ¢æç¤º

### ğŸ”§ é«˜çº§ç”¨æ³•

#### 1. ç›‘å¬ç¯å¢ƒå˜åŒ–

```javascript
// ç›‘å¬ç¯å¢ƒåˆ‡æ¢äº‹ä»¶
window.addEventListener('environmentChanged', (event) => {
    const { environment, config } = event.detail;
    console.log(`ç¯å¢ƒå·²åˆ‡æ¢åˆ°: ${config.name}`);
    
    // é‡æ–°åˆå§‹åŒ–åº”ç”¨
    if (window.app) {
        window.app.reinitialize();
    }
});
```

#### 2. è·å–ç¯å¢ƒä¿¡æ¯

```javascript
// è·å–è°ƒè¯•ä¿¡æ¯
const debugInfo = window.ENV_MANAGER.getDebugInfo();
console.log(debugInfo);

// è·å–æ‰€æœ‰å¯ç”¨ç¯å¢ƒ
const environments = window.ENV_MANAGER.getAvailableEnvironments();
console.log(environments);
```

#### 3. æ£€æŸ¥å½“å‰ç¯å¢ƒ

```javascript
// æ£€æŸ¥å½“å‰ç¯å¢ƒ
if (window.ENV_MANAGER.currentEnv === 'local') {
    console.log('å½“å‰ä½¿ç”¨å¼€å‘ç¯å¢ƒ');
} else {
    console.log('å½“å‰ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒ');
}
```

## ğŸ“Š ä¸Šä¼ é™åˆ¶é…ç½®

### ğŸ¯ æ¦‚è¿°

ä¸ºäº†é˜²æ­¢æœåŠ¡å™¨åœ¨å¤šç”¨æˆ·å¹¶å‘ä¸Šä¼ æ—¶è¿‡è½½ï¼Œæˆ‘ä»¬å®ç°äº†æ™ºèƒ½çš„ä¸Šä¼ é™åˆ¶æœºåˆ¶ã€‚

### ğŸ“Š ç¯å¢ƒé…ç½®

#### å¼€å‘ç¯å¢ƒ (development)
- **æœ€å¤§å¹¶å‘ä¸Šä¼ **: 50ä¸ª
- **ä¸Šä¼ é€Ÿç‡**: æ— é™åˆ¶
- **æœ€å¤§æ–‡ä»¶å¤§å°**: 20MB
- **æœ€å¤§è§†é¢‘å¤§å°**: 50MB

#### æµ‹è¯•ç¯å¢ƒ (staging)
- **æœ€å¤§å¹¶å‘ä¸Šä¼ **: 20ä¸ª
- **ä¸Šä¼ é€Ÿç‡**: 10MB/s
- **æœ€å¤§æ–‡ä»¶å¤§å°**: 20MB
- **æœ€å¤§è§†é¢‘å¤§å°**: 50MB

#### ç”Ÿäº§ç¯å¢ƒ (production)
- **æœ€å¤§å¹¶å‘ä¸Šä¼ **: 10ä¸ª
- **ä¸Šä¼ é€Ÿç‡**: 5MB/s
- **æœ€å¤§æ–‡ä»¶å¤§å°**: 20MB
- **æœ€å¤§è§†é¢‘å¤§å°**: 50MB

### ğŸ”§ é…ç½®æ–¹æ³•

#### 1. ç¯å¢ƒå˜é‡è®¾ç½®
```bash
# å¼€å‘ç¯å¢ƒ
export ENV=development

# æµ‹è¯•ç¯å¢ƒ
export ENV=staging

# ç”Ÿäº§ç¯å¢ƒ
export ENV=production
```

#### 2. å¯åŠ¨æœåŠ¡
```bash
# å¼€å‘ç¯å¢ƒ
go run main.go

# ç”Ÿäº§ç¯å¢ƒ
./deploy_production.sh
```

### ğŸ›¡ï¸ ä¿æŠ¤æœºåˆ¶

#### å¹¶å‘æ§åˆ¶
- ä½¿ç”¨åŸå­è®¡æ•°å™¨è·Ÿè¸ªå½“å‰ä¸Šä¼ æ•°é‡
- è¶…è¿‡é™åˆ¶æ—¶è¿”å› `429 Too Many Requests`
- è‡ªåŠ¨é‡Šæ”¾è®¡æ•°å™¨ï¼Œé˜²æ­¢æ­»é”

#### é€Ÿç‡é™åˆ¶
- ä½¿ç”¨ `RateLimitedReader` æ§åˆ¶ä¸Šä¼ é€Ÿåº¦
- å¹³æ»‘é™åˆ¶ï¼Œé¿å…çªå‘æµé‡
- å¯é…ç½®çš„é€Ÿç‡é™åˆ¶

#### æ–‡ä»¶å¤§å°éªŒè¯
- åŒé‡æ£€æŸ¥ï¼šå‰ç«¯ + åç«¯
- æ ¹æ®æ–‡ä»¶ç±»å‹è®¾ç½®ä¸åŒé™åˆ¶
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

### ğŸ“ˆ æ€§èƒ½å½±å“

#### å¼€å‘ç¯å¢ƒ
- æ— é€Ÿç‡é™åˆ¶ï¼Œé€‚åˆå¿«é€Ÿæµ‹è¯•
- é«˜å¹¶å‘é™åˆ¶ï¼Œæ”¯æŒå¤šç”¨æˆ·æµ‹è¯•

#### ç”Ÿäº§ç¯å¢ƒ
- 5MB/s é€Ÿç‡é™åˆ¶ï¼Œä¿æŠ¤æœåŠ¡å™¨èµ„æº
- 10ä¸ªå¹¶å‘é™åˆ¶ï¼Œå¹³è¡¡æ€§èƒ½å’Œç¨³å®šæ€§
- åˆç†çš„æ–‡ä»¶å¤§å°é™åˆ¶

### ğŸ” ç›‘æ§å’Œæ—¥å¿—

#### ä¸Šä¼ æ—¥å¿—
```
=== ä¸Šä¼ è¯·æ±‚è°ƒè¯•ä¿¡æ¯ ===
Content-Type: multipart/form-data
è¯·æ±‚æ–¹æ³•: POST
å½“å‰å¹¶å‘ä¸Šä¼ æ•°: 3
ç¯å¢ƒ: production, æœ€å¤§å¹¶å‘: 10, æœ€å¤§é€Ÿç‡: 5 MB/s
æ–‡ä»¶ä¿¡æ¯ - æ–‡ä»¶å: video.mp4, å¤§å°: 52428800 bytes (50.00 MB)
æ–‡ä»¶ç±»å‹æ£€æŸ¥ - æ–‡ä»¶å: video.mp4, è¯†åˆ«ç±»å‹: video
æ–‡ä»¶å¤§å°éªŒè¯é€šè¿‡
å­˜å‚¨ç©ºé—´éªŒè¯é€šè¿‡
å¼€å§‹å†™å…¥æ–‡ä»¶æ•°æ®ï¼Œä½¿ç”¨é€Ÿç‡é™åˆ¶è¯»å–å™¨ (5 MB/s)...
æ–‡ä»¶å†™å…¥å®Œæˆï¼Œå†™å…¥å­—èŠ‚æ•°: 52428800
æ–‡ä»¶è®°å½•ä¿å­˜æˆåŠŸ
```

#### é”™è¯¯å¤„ç†
- å¹¶å‘è¶…é™ï¼š`æœåŠ¡å™¨ç¹å¿™ï¼Œè¯·ç¨åé‡è¯•`
- æ–‡ä»¶è¿‡å¤§ï¼š`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡50MBï¼Œå½“å‰æ–‡ä»¶å¤§å°: 60.00MB`
- å­˜å‚¨ä¸è¶³ï¼š`å­˜å‚¨ç©ºé—´ä¸è¶³`

## ğŸ“Š Main.go ç®€åŒ–æ€»ç»“

### æ¦‚è¿°

æœ¬æ¬¡é‡æ„å¤§å¹…ç®€åŒ–äº† `backend/main.go` æ–‡ä»¶ï¼Œå°†åŸæœ¬å¤æ‚çš„åˆå§‹åŒ–é€»è¾‘å°è£…åˆ°ç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚

### ç®€åŒ–å‰åå¯¹æ¯”

#### ç®€åŒ–å‰ (215è¡Œ)
- åŒ…å«æ•°æ®åº“é‡ç½®é€»è¾‘
- åŒ…å«å®Œæ•´çš„åº”ç”¨åˆå§‹åŒ–é€»è¾‘
- åŒ…å«ä¸­é—´ä»¶é…ç½®
- åŒ…å«è·¯ç”±è®¾ç½®
- åŒ…å«é”™è¯¯å¤„ç†é€»è¾‘

#### ç®€åŒ–å (25è¡Œ)
- åªä¿ç•™å‘½ä»¤è¡Œå‚æ•°æ£€æŸ¥
- ä½¿ç”¨å¯åŠ¨å™¨æ¨¡å¼
- é€»è¾‘æ¸…æ™°ï¼ŒèŒè´£å•ä¸€

### æ–°å¢æ¨¡å—

#### 1. `backend/app/app.go` - åº”ç”¨åˆå§‹åŒ–å™¨
**èŒè´£**: å°è£…åº”ç”¨çš„æ‰€æœ‰åˆå§‹åŒ–é€»è¾‘
- é…ç½®åŠ è½½
- æ•°æ®åº“åˆå§‹åŒ–
- è·¯ç”±é…ç½®
- ä¸­é—´ä»¶è®¾ç½®
- å¤„ç†å™¨åˆå§‹åŒ–

**ä¸»è¦æ–¹æ³•**:
- `NewApp()` - åˆ›å»ºåº”ç”¨å®ä¾‹
- `Initialize()` - åˆå§‹åŒ–åº”ç”¨
- `Run()` - å¯åŠ¨æœåŠ¡å™¨
- `Close()` - å…³é—­åº”ç”¨

#### 2. `backend/app/launcher.go` - åº”ç”¨å¯åŠ¨å™¨
**èŒè´£**: ç®€åŒ–åº”ç”¨å¯åŠ¨æµç¨‹
- å°è£…é”™è¯¯å¤„ç†
- æä¾›ç»Ÿä¸€çš„å¯åŠ¨æ¥å£

**ä¸»è¦æ–¹æ³•**:
- `NewLauncher()` - åˆ›å»ºå¯åŠ¨å™¨
- `Start()` - å¯åŠ¨åº”ç”¨
- `StartWithErrorHandling()` - å¯åŠ¨å¹¶å¤„ç†é”™è¯¯

#### 3. `backend/utils/db_reset.go` - æ•°æ®åº“é‡ç½®å·¥å…·
**èŒè´£**: å¤„ç†æ•°æ®åº“é‡ç½®é€»è¾‘
- åˆ†ç¦»æ•°æ®åº“é‡ç½®åŠŸèƒ½
- æä¾›ç‹¬ç«‹çš„å·¥å…·å‡½æ•°

**ä¸»è¦æ–¹æ³•**:
- `ResetUpdateLogsTable()` - é‡ç½®æ›´æ–°æ—¥å¿—è¡¨

### æ¶æ„æ”¹è¿›

#### åˆ†å±‚æ¶æ„
```
main.go (25è¡Œ)
â”œâ”€â”€ app/launcher.go (å¯åŠ¨å™¨)
â”œâ”€â”€ app/app.go (åº”ç”¨åˆå§‹åŒ–å™¨)
â””â”€â”€ utils/db_reset.go (æ•°æ®åº“å·¥å…·)
```

#### èŒè´£åˆ†ç¦»
1. **main.go**: ç¨‹åºå…¥å£ï¼Œå‘½ä»¤è¡Œå‚æ•°å¤„ç†
2. **Launcher**: åº”ç”¨å¯åŠ¨æµç¨‹ç®¡ç†
3. **App**: åº”ç”¨æ ¸å¿ƒé€»è¾‘å°è£…
4. **Utils**: å·¥å…·å‡½æ•°é›†åˆ

### ä»£ç è´¨é‡æå‡

#### 1. å¯è¯»æ€§
- main.go ä» 215 è¡Œå‡å°‘åˆ° 25 è¡Œ
- é€»è¾‘æ¸…æ™°ï¼Œä¸€ç›®äº†ç„¶
- æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€

#### 2. å¯ç»´æŠ¤æ€§
- æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºä¿®æ”¹
- é”™è¯¯å¤„ç†ç»Ÿä¸€
- é…ç½®ç®¡ç†é›†ä¸­

#### 3. å¯æµ‹è¯•æ€§
- å„æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºå•å…ƒæµ‹è¯•
- ä¾èµ–æ³¨å…¥ï¼Œä¾¿äºæ¨¡æ‹Ÿæµ‹è¯•
- æ¥å£æ¸…æ™°ï¼Œä¾¿äºé›†æˆæµ‹è¯•

#### 4. å¯æ‰©å±•æ€§
- æ–°å¢åŠŸèƒ½åªéœ€æ‰©å±•å¯¹åº”æ¨¡å—
- ä¸å½±å“ä¸»ç¨‹åºé€»è¾‘
- æ”¯æŒæ’ä»¶åŒ–æ¶æ„

### æ€§èƒ½ä¼˜åŒ–

#### 1. å¯åŠ¨ä¼˜åŒ–
- åˆå§‹åŒ–é€»è¾‘ä¼˜åŒ–
- é”™è¯¯å¤„ç†ä¼˜åŒ–
- èµ„æºç®¡ç†ä¼˜åŒ–

#### 2. å†…å­˜ä¼˜åŒ–
- å‡å°‘ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º
- ä¼˜åŒ–æ•°æ®åº“è¿æ¥æ± 
- æ”¹è¿›ä¸­é—´ä»¶æ€§èƒ½

### ä½¿ç”¨æ–¹å¼

#### æ­£å¸¸å¯åŠ¨
```bash
go run main.go
```

#### é‡ç½®æ•°æ®åº“
```bash
go run main.go --reset-db
```

## ğŸš€ éƒ¨ç½²å»ºè®®

### 1. ç”Ÿäº§ç¯å¢ƒé…ç½®

**ç¼“å­˜ç­–ç•¥**:
- ä½¿ç”¨Redisç¼“å­˜
- é…ç½®åˆé€‚çš„TTL
- ç›‘æ§å†…å­˜ä½¿ç”¨

**å¼‚æ­¥å¤„ç†**:
- æ ¹æ®CPUæ ¸å¿ƒæ•°è°ƒæ•´å·¥ä½œå™¨æ•°é‡
- ç›‘æ§é˜Ÿåˆ—é•¿åº¦
- è®¾ç½®åˆç†çš„é‡è¯•ç­–ç•¥

### 2. ç›‘æ§é…ç½®

**å…³é”®æŒ‡æ ‡**:
- ç¼“å­˜å‘½ä¸­ç‡
- ä»»åŠ¡å¤„ç†é€Ÿåº¦
- ç³»ç»Ÿèµ„æºä½¿ç”¨
- é”™è¯¯ç‡ç»Ÿè®¡

**å‘Šè­¦è®¾ç½®**:
- ç¼“å­˜å‘½ä¸­ç‡è¿‡ä½
- ä»»åŠ¡é˜Ÿåˆ—ç§¯å‹
- ç³»ç»Ÿèµ„æºä¸è¶³

### 3. é«˜æµé‡åœºæ™¯
- è€ƒè™‘ä½¿ç”¨è´Ÿè½½å‡è¡¡
- å¢åŠ æœåŠ¡å™¨èµ„æº
- è°ƒæ•´å¹¶å‘å’Œé€Ÿç‡é™åˆ¶

### 4. é…ç½®è°ƒæ•´

å¦‚éœ€è°ƒæ•´é™åˆ¶ï¼Œä¿®æ”¹ `backend/config/upload_config.go` ä¸­çš„é…ç½®ï¼š

```go
case "production":
    config.MaxUploadRate = 5 * 1024 * 1024        // 5MB/s
    config.MaxConcurrentUploads = 10               // 10ä¸ªå¹¶å‘
    config.MaxFileSize = 20 * 1024 * 1024         // 20MB
    config.MaxVideoSize = 50 * 1024 * 1024        // 50MB
```

## ğŸ“± ç§»åŠ¨ç«¯æ”¯æŒ

ç¯å¢ƒåˆ‡æ¢å™¨åœ¨ç§»åŠ¨ç«¯ä¼šè‡ªåŠ¨è°ƒæ•´ï¼š

- ä½ç½®è°ƒæ•´åˆ°å³ä¸‹è§’
- æŒ‰é’®å¤§å°é€‚é…å°å±å¹•
- è§¦æ‘¸å‹å¥½çš„äº¤äº’

## ğŸ”’ å®‰å…¨è€ƒè™‘

### ç®¡ç†å‘˜æƒé™

ç¯å¢ƒåˆ‡æ¢å™¨åªæœ‰ç®¡ç†å‘˜ç”¨æˆ·å¯è§ï¼š

```javascript
// æ£€æŸ¥æ˜¯å¦ä¸ºç®¡ç†å‘˜
function isAdmin() {
    const user = window.authManager?.getCurrentUser();
    return user && user.role === 'admin';
}
```

### ç”Ÿäº§ç¯å¢ƒä¿æŠ¤

```javascript
// åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éšè—è°ƒè¯•åŠŸèƒ½
if (window.ENV_MANAGER.currentEnv === 'prod') {
    // éšè—è°ƒè¯•åŠŸèƒ½
    console.log = () => {};
}
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### 1. ç¯å¢ƒè°ƒè¯•

```javascript
// åœ¨æ§åˆ¶å°æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
window.ENV_UTILS.showEnvInfo();

// è¾“å‡ºæ ¼å¼ï¼š
// ğŸŒ ç¯å¢ƒä¿¡æ¯
// ç¯å¢ƒ: å¼€å‘ç¯å¢ƒ
// APIåœ°å€: http://localhost:8080
// è°ƒè¯•æ¨¡å¼: true
// åŠŸèƒ½ç‰¹æ€§: {hotReload: true, detailedLogs: true, mockData: false}
```

### 2. ç½‘ç»œè¯·æ±‚è°ƒè¯•

```javascript
// æ‹¦æˆªAPIè¯·æ±‚è¿›è¡Œè°ƒè¯•
const originalFetch = window.fetch;
window.fetch = function(url, options) {
    if (window.ENV_MANAGER.config.debug) {
        console.log(`ğŸŒ APIè¯·æ±‚: ${url}`);
    }
    return originalFetch(url, options);
};
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. ç¼“å­˜ç­–ç•¥

```javascript
// æ ¹æ®ç¯å¢ƒè®¾ç½®ä¸åŒçš„ç¼“å­˜ç­–ç•¥
function getCacheStrategy() {
    const env = window.ENV_MANAGER.currentEnv;
    
    switch (env) {
        case 'local':
            return 'no-cache'; // å¼€å‘ç¯å¢ƒä¸ç¼“å­˜
        case 'prod':
            return 'max-age=3600'; // ç”Ÿäº§ç¯å¢ƒ1å°æ—¶ç¼“å­˜
        default:
            return 'max-age=600'; // é»˜è®¤10åˆ†é’Ÿç¼“å­˜
    }
}
```

### 2. é”™è¯¯å¤„ç†

```javascript
// ç¯å¢ƒç›¸å…³çš„é”™è¯¯å¤„ç†
function handleApiError(error) {
    const env = window.ENV_MANAGER.currentEnv;
    
    if (env === 'local') {
        // å¼€å‘ç¯å¢ƒæ˜¾ç¤ºè¯¦ç»†é”™è¯¯
        console.error('APIé”™è¯¯è¯¦æƒ…:', error);
    } else {
        // ç”Ÿäº§ç¯å¢ƒæ˜¾ç¤ºç”¨æˆ·å‹å¥½é”™è¯¯
        console.error('æœåŠ¡æš‚æ—¶ä¸å¯ç”¨');
    }
}
```

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»æ—§ç‰ˆæœ¬è¿ç§»

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨çš„æ˜¯é™æ€ç¯å¢ƒé…ç½®ï¼Œå¯ä»¥è¿™æ ·è¿ç§»ï¼š

```javascript
// æ—§ç‰ˆæœ¬ä»£ç 
const API_BASE_URL = 'http://localhost:8080';

// æ–°ç‰ˆæœ¬ä»£ç 
const apiUrl = window.ENV_MANAGER.buildApiUrl('/api/endpoint');
```

### å…¼å®¹æ€§ä¿æŒ

ç³»ç»Ÿä¿æŒäº†å‘åå…¼å®¹æ€§ï¼š

```javascript
// æ—§ç‰ˆæœ¬APIä»ç„¶å¯ç”¨
console.log(window.APP_CONFIG.API_BASE_URL);
console.log(window.APP_CONFIG.ENV);
console.log(window.APP_CONFIG.DEBUG);

// æ–°ç‰ˆæœ¬API
console.log(window.ENV_MANAGER.config.apiBaseUrl);
console.log(window.ENV_MANAGER.currentEnv);
console.log(window.ENV_MANAGER.config.debug);
```

## ğŸ“ æœ€ä½³å®è·µ

### 1. ç¯å¢ƒå‘½åè§„èŒƒ

- `local`: å¼€å‘ç¯å¢ƒ
- `prod`: ç”Ÿäº§ç¯å¢ƒ

### 2. é…ç½®ç®¡ç†

```javascript
// æ¨èçš„ç¯å¢ƒé…ç½®ç»“æ„
const environmentConfig = {
    name: 'ç¯å¢ƒåç§°',
    apiBaseUrl: 'APIåŸºç¡€åœ°å€',
    debug: true/false,
    features: {
        hotReload: true/false,
        detailedLogs: true/false,
        mockData: true/false
    }
};
```

### 3. é”™è¯¯å¤„ç†

```javascript
// ç¯å¢ƒåˆ‡æ¢æ—¶çš„é”™è¯¯å¤„ç†
try {
    window.ENV_MANAGER.switchEnvironment('prod');
} catch (error) {
    console.error('ç¯å¢ƒåˆ‡æ¢å¤±è´¥:', error);
    // å›é€€åˆ°é»˜è®¤ç¯å¢ƒ
    window.ENV_MANAGER.switchEnvironment('local');
}
```

## ğŸ”® åç»­ä¼˜åŒ–å»ºè®®

1. **é…ç½®çƒ­é‡è½½**: æ”¯æŒè¿è¡Œæ—¶é…ç½®æ›´æ–°
2. **ä¼˜é›…å…³é—­**: å®ç°ä¼˜é›…å…³é—­æœºåˆ¶
3. **å¥åº·æ£€æŸ¥**: å¢å¼ºå¥åº·æ£€æŸ¥åŠŸèƒ½
4. **ç›‘æ§é›†æˆ**: é›†æˆ Prometheus ç›‘æ§
5. **æ—¥å¿—ä¼˜åŒ–**: å®ç°ç»“æ„åŒ–æ—¥å¿—
6. **ç¼“å­˜æœºåˆ¶**: æ·»åŠ  Redis ç¼“å­˜æ”¯æŒ

## ğŸ“Š æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–æ˜¾è‘—æå‡äº†ç³»ç»Ÿçš„ï¼š

- **ç¯å¢ƒç®¡ç†**: åŠ¨æ€ç¯å¢ƒé…ç½®ã€è‡ªåŠ¨æ£€æµ‹ã€å¯è§†åŒ–åˆ‡æ¢
- **ä¸Šä¼ æ§åˆ¶**: æ™ºèƒ½é™åˆ¶ã€å¹¶å‘æ§åˆ¶ã€é€Ÿç‡ç®¡ç†
- **ä»£ç è´¨é‡**: æ¨¡å—åŒ–è®¾è®¡ã€èŒè´£åˆ†ç¦»ã€å¯ç»´æŠ¤æ€§
- **éƒ¨ç½²ä¾¿åˆ©**: ç®€åŒ–å¯åŠ¨æµç¨‹ã€ç»Ÿä¸€é”™è¯¯å¤„ç†ã€é…ç½®é›†ä¸­

è¿™äº›ä¼˜åŒ–ä¸ºç³»ç»Ÿçš„ç¨³å®šè¿è¡Œå’Œåç»­æ‰©å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚ 