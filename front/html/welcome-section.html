<!-- Ê¨¢Ëøé‰ø°ÊÅØ -->
<div class="mb-8">
    <div class="glass-effect rounded-2xl p-4 md:p-8 shadow-xl relative overflow-hidden welcome-section-card" id="welcome-section-card">
        <!-- ËÉåÊôØË£ÖÈ•∞Â∑≤Âà†Èô§ -->
        
        <div class="relative z-10">
            <!-- ÁßªÂä®Á´Ø‰ºòÂåñÁöÑÂ§¥ÈÉ®Â∏ÉÂ±Ä -->
            <div class="welcome-header">
                <!-- Â§¥ÂÉèÂíåÊ¨¢Ëøé‰ø°ÊÅØ -->
                <div class="welcome-user-info">
                    <div class="avatar-section">
                        <div class="relative group">
                            <div class="profile-avatar" id="profile-avatar" title="ÁÇπÂáªÁºñËæë‰∏™‰∫∫ËµÑÊñô">
                                <i class="fa fa-user-circle avatar-icon" id="avatar-icon"></i>
                                <img id="avatar-image" class="avatar-image hidden" alt="Â§¥ÂÉè">
                            </div>
                            <!-- ÁºñËæëÂõæÊ†áÊèêÁ§∫ -->
                            <div class="edit-icon" title="ÁºñËæë‰∏™‰∫∫ËµÑÊñô">
                                <i class="fa fa-pencil"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="welcome-text">
                        <h1 class="welcome-title">
                            <span id="welcome-message">Ê¨¢ËøéÂõûÊù•ÔºåÁî®Êà∑</span>
                        </h1>
                        <p class="welcome-date">‰ªäÂ§©ÊòØ <span id="current-date" class="text-purple-light font-medium"></span></p>
                    </div>
                </div>
                
                <!-- Êñá‰ª∂ÁªüËÆ°Âç°Áâá -->
                <div class="file-stats-card">
                    <div class="stats-content">
                        <div class="stats-number" id="file-count">0</div>
                        <div class="stats-label">‰∏™Êñá‰ª∂</div>
                    </div>
                </div>
            </div>
            
            <!-- Áä∂ÊÄÅ‰ø°ÊÅØÂç°Áâá -->
            <div class="status-cards">
                <div class="status-card status-login">
                    <div class="status-icon">
                        <i class="fa fa-clock-o"></i>
                    </div>
                    <div class="status-info">
                        <div class="status-label">ÊúÄÂêéÁôªÂΩï</div>
                        <div class="status-value" id="last-login"></div>
                    </div>
                </div>
                
                <div class="status-card status-storage">
                    <div class="status-icon">
                        <i class="fa fa-cloud"></i>
                    </div>
                    <div class="status-info">
                        <div class="status-label">Â≠òÂÇ®Áä∂ÊÄÅ</div>
                        <div class="status-value" id="welcome-storage-status">--</div>
                    </div>
                </div>
                
                <script>
                    let isInitialized = false;
                    
                    // ‰ªéÊú¨Âú∞ÁºìÂ≠òËØªÂèñÂ≠òÂÇ®Áä∂ÊÄÅ
                    function updateStorageStatusFromCache() {
                        // Â∞ùËØï‰ªéÊñ∞ÁöÑStorageManagerÁªìÊûÑËØªÂèñ
                        let storageStatusData = null;
                        
                        // ÊñπÊ≥ï1Ôºö‰ªéStorageManagerËØªÂèñ
                        if (window.StorageManager && typeof window.StorageManager.getStorageStatus === 'function') {
                            storageStatusData = window.StorageManager.getStorageStatus();
                        }
                        
                        // ÊñπÊ≥ï2Ôºö‰ªésystemInfoËØªÂèñ
                        if (!storageStatusData) {
                            const systemData = localStorage.getItem('systemInfo');
                            if (systemData) {
                                try {
                                    const systemInfo = JSON.parse(systemData);
                                    storageStatusData = systemInfo.storageStatus;
                                } catch (error) {
                                    console.warn('Ëß£ÊûêsystemInfoÂ§±Ë¥•:', error);
                                }
                            }
                        }
                        
                        // ÊñπÊ≥ï3Ôºö‰ªéÊóßÁöÑstorageStatusÈîÆËØªÂèñÔºàÂÖºÂÆπÊÄßÔºâ
                        if (!storageStatusData) {
                            const oldData = localStorage.getItem('storageStatus');
                            if (oldData) {
                                try {
                                    storageStatusData = JSON.parse(oldData);
                                } catch (error) {
                                    console.warn('Ëß£ÊûêÊóßstorageStatusÂ§±Ë¥•:', error);
                                }
                            }
                        }
                        
                        if (storageStatusData && storageStatusData.status) {
                            try {
                                const welcomeStorageStatus = document.getElementById('welcome-storage-status');
                                if (welcomeStorageStatus) {
                                    // Á°Æ‰øùÂè™‰ΩøÁî®statusÂ≠óÊÆµÔºåÈÅøÂÖç‰ΩøÁî®percentageÂ≠óÊÆµ
                                    let statusText = storageStatusData.status;
                                    
                                    // Â¶ÇÊûústatusÊòØÊï∞Â≠óÊàñÊï∞Â≠óÂ≠óÁ¨¶‰∏≤ÔºåËØ¥ÊòéÂèØËÉΩÊòØÈîôËØØÁöÑÂ≠óÊÆµ
                                    if (typeof statusText === 'number' || (typeof statusText === 'string' && !isNaN(parseFloat(statusText)))) {
                                        console.warn('üíæ Ê¨¢ËøéÊ®°ÂùóÔºöÊ£ÄÊµãÂà∞statusÂ≠óÊÆµ‰∏∫Êï∞Â≠óÔºåÂèØËÉΩÊòØÈîôËØØÁöÑÂ≠óÊÆµÊò†Â∞Ñ');
                                        // Â∞ùËØï‰ªéÂÖ∂‰ªñÂ≠óÊÆµËé∑ÂèñÊ≠£Á°ÆÁöÑÁä∂ÊÄÅÊñáÊú¨
                                        if (storageStatusData.remainingPercentage !== undefined) {
                                            const remainingPercentage = storageStatusData.remainingPercentage;
                                            if (remainingPercentage > 30) {
                                                statusText = 'ÂÖÖË∂≥';
                                            } else if (remainingPercentage >= 10) {
                                                statusText = '‰∏çË∂≥';
                                            } else {
                                                statusText = '‰∏•Èáç‰∏çË∂≥';
                                            }
                                        } else {
                                            // Â¶ÇÊûúÊ≤°ÊúâÂÖ∂‰ªñÂ≠óÊÆµÔºå‰ΩøÁî®ÈªòËÆ§ÂÄº
                                            statusText = 'ÂÖÖË∂≥';
                                        }
                                    }
                                    
                                    welcomeStorageStatus.textContent = statusText;
                                    isInitialized = true;
                                }
                            } catch (error) {
                                console.error('Ëß£ÊûêÂ≠òÂÇ®Áä∂ÊÄÅÁºìÂ≠òÂ§±Ë¥•:', error);
                            }
                        } else {
                            // Â¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÊï∞ÊçÆÔºåÁ≠âÂæÖÂ≠òÂÇ®Á©∫Èó¥Ê¶ÇËßàÊ®°ÂùóÊõ¥Êñ∞
                            if (!isInitialized) {
                                setTimeout(() => {
                                    // Âª∂ËøüÈáçËØïÔºåÁ≠âÂæÖÂ≠òÂÇ®Á©∫Èó¥Ê¶ÇËßàÊ®°ÂùóÂàùÂßãÂåñ
                                    updateStorageStatusFromCache();
                                }, 1000);
                            }
                        }
                    }
                    
                    // ÁõëÂê¨Â≠òÂÇ®Áä∂ÊÄÅÂèòÂåñ
                    function setupStorageStatusListener() {
                        // ÁõëÂê¨localStorageÂèòÂåñ
                        window.addEventListener('storage', function(e) {
                            if (e.key === 'storageStatus' || e.key === 'systemInfo') {
                                updateStorageStatusFromCache();
                            }
                        });
                        
                        // ÁõëÂê¨Ëá™ÂÆö‰πâ‰∫ã‰ª∂
                        window.addEventListener('storageStatusUpdated', function(e) {
                            updateStorageStatusFromCache();
                        });
                    }
                    
                    // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÁöÑÂàùÂßãÂåñ
                    function initializeStorageStatus() {
                        // Á´ãÂç≥Â∞ùËØïÊõ¥Êñ∞
                        updateStorageStatusFromCache();
                        
                        // ËÆæÁΩÆÁõëÂê¨Âô®
                        setupStorageStatusListener();
                        
                        // Âª∂ËøüÈáçËØïÔºåÁ°Æ‰øùDOMÂÖÉÁ¥†Â∑≤Âä†ËΩΩ
                        setTimeout(updateStorageStatusFromCache, 100);
                        setTimeout(updateStorageStatusFromCache, 500);
                        setTimeout(updateStorageStatusFromCache, 1000);
                        
                        // Â¶ÇÊûúËøòÊòØÊ≤°ÊúâÊï∞ÊçÆÔºåÁ≠âÂæÖÊõ¥ÈïøÊó∂Èó¥ÂêéÂÜçÊ¨°Â∞ùËØï
                        setTimeout(() => {
                            if (!isInitialized) {
                                updateStorageStatusFromCache();
                            }
                        }, 3000);
                    }
                    
                    // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
                    if (document.readyState === 'loading') {
                        document.addEventListener('DOMContentLoaded', initializeStorageStatus);
                    } else {
                        initializeStorageStatus();
                    }
                </script>
                
                <div class="status-card status-security">
                    <div class="status-icon">
                        <i class="fa fa-shield"></i>
                    </div>
                    <div class="status-info">
                        <div class="status-label">ÂÆâÂÖ®Áä∂ÊÄÅ</div>
                        <div class="status-value">Â∑≤‰øùÊä§</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 